var powerbi;!function(e){!function(e){!function(e){!function(e){!function(e){function t(e,t,n){void 0===e&&(e=[]);var a=e;return i(a),t&&(a.identityFields=t),n&&(a.source=n),a}function i(e,t){e.grouped=t?function(){return t}:function(){return n(e)}}function n(e){for(var t,i=[],n=0,a=e.length;n<a;n++){var r=e[n];if(!t||t.identity!==r.identity){if(t={values:[]},r.identity){t.identity=r.identity;var s=r.source;void 0!==s.groupName?t.name=s.groupName:s.displayName&&(t.name=s.displayName)}i.push(t)}t.values.push(r)}return i}e.createValueColumns=t,e.setGrouped=i,e.groupValues=n}(e.DataViewTransform||(e.DataViewTransform={}))}(e.dataview||(e.dataview={}))}(e.utils||(e.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(e){!function(e){!function(e){!function(e){function t(e,t){if(!e||!e.length)return-1;var i=e[0];if(i.values&&i.values.length>0)for(var a=0,r=i.values.length;a<r;++a){var s=i.values[a];if(s&&s.source&&n(s.source,t))return a}return-1}function i(e,t){if(e&&e.length)for(var i=0,a=e.length;i<a;i++)if(n(e[i].source,t))return i;return-1}function n(e,t){var i=e.roles;return i&&i[t]}function a(e,t){return null!=e&&null!=e.metadata&&e.metadata.columns&&e.metadata.columns.some(function(e){return e.roles&&void 0!==e.roles[t]})}function r(e,t){return e&&e.source&&e.source.roles&&!0===e.source.roles[t]}e.getMeasureIndexOfRole=t,e.getCategoryIndexOfRole=i,e.hasRole=n,e.hasRoleInDataView=a,e.hasRoleInValueColumn=r}(e.DataRoleHelper||(e.DataRoleHelper={}))}(e.dataview||(e.dataview={}))}(e.utils||(e.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(e){!function(e){!function(e){!function(e){function t(e,t,i){if(!e)return i;var n=e[t];return void 0===n?i:n}function i(e,i,n){var a=t(e,i);return a&&a.solid?a.solid.color:n}e.getValue=t,e.getFillColorByPropertyName=i}(e.DataViewObject||(e.DataViewObject={}))}(e.dataview||(e.dataview={}))}(e.utils||(e.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(e){!function(e){!function(e){!function(t){function i(t,i,n){return t?e.DataViewObject.getValue(t[i.objectName],i.propertyName,n):n}function n(e,t,i){return e&&e[t]?e[t]:i}function a(e,t,n){var a=i(e,t);return a&&a.solid?a.solid.color:n}function r(e,t,n){var a=i(e,t,n);return a&&a.solid?a.solid.color:void 0===a||null===a||"object"==typeof a&&!a.solid?n:a}t.getValue=i,t.getObject=n,t.getFillColor=a,t.getCommonValue=r}(e.DataViewObjects||(e.DataViewObjects={}))}(e.dataview||(e.dataview={}))}(e.utils||(e.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(t){!function(t){!function(t){var i=e.extensibility.utils.dataview.DataRoleHelper;!function(e){function t(e,t,n){if(e.categories&&e.categories.length>0){var a=e.categories[0];return a.source&&i.hasRole(a.source,t)&&i.hasRole(a.source,n)}return!1}function n(e){return void 0!==e.groupName?e.groupName:e.queryName}function a(e){var t=s(e);return null!=t&&!0===t.imageUrl}function r(e){var t=s(e);return null!=t&&!0===t.webUrl}function s(e){return e&&e.type&&e.type.misc}function o(e){return!!(e&&e.metadata&&e.metadata.columns&&e.metadata.columns.length)&&e.metadata.columns.some(function(e){return!0===a(e)})}e.categoryIsAlsoSeriesRole=t,e.getSeriesName=n,e.isImageUrlColumn=a,e.isWebUrlColumn=r,e.getMiscellaneousTypeDescriptor=s,e.hasImageUrlColumn=o}(t.converterHelper||(t.converterHelper={}))}(t.dataview||(t.dataview={}))}(t.utils||(t.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(e){!function(e){!function(e){var t=function(){function t(){}return t.getDefault=function(){return new this},t.createPropertyIdentifier=function(e,t){return{objectName:e,propertyName:t}},t.parse=function(t){var i,n=this.getDefault();if(!t||!t.metadata||!t.metadata.objects)return n;i=n.getProperties();for(var a in i)for(var r in i[a]){var s=n[a][r];n[a][r]=e.DataViewObjects.getCommonValue(t.metadata.objects,i[a][r],s)}return n},t.isPropertyEnumerable=function(e){return!t.InnumerablePropertyPrefix.test(e)},t.enumerateObjectInstances=function(e,t){var i=e&&e[t.objectName];if(!i)return[];var n={objectName:t.objectName,selector:null,properties:{}};for(var a in i)i.hasOwnProperty(a)&&(n.properties[a]=i[a]);return{instances:[n]}},t.prototype.getProperties=function(){var e=this,i={};return Object.keys(this).forEach(function(n){if(t.isPropertyEnumerable(n)){var a=Object.keys(e[n]);i[n]={},a.forEach(function(e){t.isPropertyEnumerable(n)&&(i[n][e]=t.createPropertyIdentifier(n,e))})}}),i},t}();t.InnumerablePropertyPrefix=/^_/,e.DataViewObjectsParser=t}(e.dataview||(e.dataview={}))}(e.utils||(e.utils={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},powerbi;!function(e){!function(e){!function(e){!function(e){"use strict";function t(){s=0}function i(){return 0===s}function n(e,t){var i=[];if(e&&e.hasChildNodes()){for(var n=e.children,r=0;r<n.length;r++){var s=void 0;s="script"===n.item(r).nodeName.toLowerCase()?a(n.item(r)):n.item(r).cloneNode(!0),t.appendChild(s),i.push(s)}return i}}function a(e){for(var t=document.createElement("script"),i=e.attributes,n=0;n<i.length;n++)t.setAttribute(i[n].name,i[n].textContent),"src"===i[n].name.toLowerCase()&&(s++,t.onload=function(){s--});return t.innerHTML=e.innerHTML,t}function r(){var e=window.setInterval(function(){i()&&(window.clearInterval(e),window.hasOwnProperty("HTMLWidgets")&&window.HTMLWidgets.staticRender&&window.HTMLWidgets.staticRender())},100)}var s=0;e.ResetInjector=t,e.injectorReady=i,e.ParseElement=n,e.RunHTMLWidgetRenderer=r}(e.rHTMLnew95480AC55B814FBCB378FA548F2C97AD||(e.rHTMLnew95480AC55B814FBCB378FA548F2C97AD={}))}(e.visual||(e.visual={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(e){!function(e){!function(e){function t(e,t,i,n){if(e){var a=e[t];if(a){var r=a[i];if(void 0!==r)return r}}return n}function i(e,t,i,n,a,r){if(e){var s=e[t];if(s){var o=s[i];if(o<a)return a;if(o>r)return r;if(void 0!==o)return o}}return n}function n(e,t,i,n,a,r){if(e){var s=e[t];if(s){var o=s[i];if(void 0!==o)return o>r?r:o<a?a:o}}return n}function a(e,t,i,n,a,r){return r&&t==i&&1==a?n:r&&t!=i&&0==a?n:e}function r(e,t){return"auto"!=t?"None":"auto"==t&&"None"==e?"fast":e}function s(e,t,i){return e<t?t:e>i?i:e}function o(e,t,i,n,a){var r=e.objects;if(r){var s=r[t];if(s){var o=s[i];if(o){var u=o[n];if(void 0!==u)return u}}}return a}e.getValue=t,e.getValueMinMax=i,e.getValueNumberMinMax=n,e.ifStringReturnString=a,e.ifStringReturnStringClustersMethod=r,e.inMinMax=s,e.getCategoricalObjectValue=o}(e.rHTMLnew95480AC55B814FBCB378FA548F2C97AD||(e.rHTMLnew95480AC55B814FBCB378FA548F2C97AD={}))}(e.visual||(e.visual={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(t){!function(t){!function(t){"use strict";var i=e.extensibility.utils.dataview.DataViewObjectsParser,n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rcv_script=new a,t}return __extends(t,e),t}(i);t.VisualSettings=n;var a=function(){function e(){}return e}();t.rcv_scriptSettings=a}(t.rHTMLnew95480AC55B814FBCB378FA548F2C97AD||(t.rHTMLnew95480AC55B814FBCB378FA548F2C97AD={}))}(t.visual||(t.visual={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(t){!function(t){!function(t){"use strict";var i=[e.VisualUpdateType.Resize,e.VisualUpdateType.ResizeEnd,e.VisualUpdateType.Resize+e.VisualUpdateType.ResizeEnd],n=function(){function e(e){e&&e.element&&(this.rootElement=e.element),this.headNodes=[],this.bodyNodes=[],this.settings_forecastPlot_params={forecastLength:500,freq1:1,freq2:1},this.settings_conf_params={confInterval1:"0.5",confInterval2:"0.995"},this.settings_graph_params={dataCol:"orange",forecastCol:"red",fittedCol:"green",percentile:40,weight:10,showFromTo:"all",refPointShift:0,showInPlotFitted:!1},this.settings_additional_params={valuesNonNegative:!1,algModeFast:!1,useParProc:!1},this.settings_info_params={textSize:10,infoTextCol:"gray50",numDigitsInfo:"0",whichInfo:"none"},this.settings_axes_params={showScientificY:!1,textSize:12,labelsTextCol:"black",userFormatX:"auto"}}return e.prototype.update=function(t){if(t&&t.type&&t.viewport&&t.dataViews&&0!==t.dataViews.length&&t.dataViews[0]){var n=t.dataViews[0];this.settings=e.parseSettings(n),this.updateObjects(n.metadata.objects);var a=null;n.scriptResult&&n.scriptResult.payloadBase64&&(a=n.scriptResult.payloadBase64),-1===i.indexOf(t.type)?a&&this.injectCodeFromPayload(a):this.onResizing(t.viewport)}},e.prototype.onResizing=function(e){},e.prototype.injectCodeFromPayload=function(e){if(t.ResetInjector(),e){var i=document.createElement("html");try{i.innerHTML=window.atob(e)}catch(e){return}if(0===this.headNodes.length){for(;this.headNodes.length>0;){var n=this.headNodes.pop();document.head.removeChild(n)}var a=i.getElementsByTagName("head");if(a&&a.length>0){var r=a[0];this.headNodes=t.ParseElement(r,document.head)}}for(;this.bodyNodes.length>0;){var n=this.bodyNodes.pop();this.rootElement.removeChild(n)}var s=i.getElementsByTagName("body");if(s&&s.length>0){var o=s[0];this.bodyNodes=t.ParseElement(o,this.rootElement)}t.RunHTMLWidgetRenderer()}},e.parseSettings=function(e){return t.VisualSettings.parse(e)},e.prototype.updateObjects=function(e){this.settings_forecastPlot_params={forecastLength:t.getValue(e,"settings_forecastPlot_params","forecastLength",500),freq1:t.getValue(e,"settings_forecastPlot_params","freq1",1),freq2:t.getValue(e,"settings_forecastPlot_params","freq2",1)},this.settings_conf_params={confInterval1:t.getValue(e,"settings_conf_params","confInterval1","0.5"),confInterval2:t.getValue(e,"settings_conf_params","confInterval2","0.995")},this.settings_graph_params={dataCol:t.getValue(e,"settings_graph_params","dataCol","orange"),forecastCol:t.getValue(e,"settings_graph_params","forecastCol","red"),fittedCol:t.getValue(e,"settings_graph_params","fittedCol","green"),percentile:t.getValue(e,"settings_graph_params","percentile",40),weight:t.getValue(e,"settings_graph_params","weight",10),showFromTo:t.getValue(e,"settings_graph_params","showFromTo","all"),refPointShift:t.getValue(e,"settings_graph_params","refPointShift",0),showInPlotFitted:t.getValue(e,"settings_graph_params","showInPlotFitted",!1)},this.settings_additional_params={algModeFast:t.getValue(e,"settings_additional_params","algModeFast",!1),valuesNonNegative:t.getValue(e,"settings_additional_params","valuesNonNegative",!1),useParProc:t.getValue(e,"settings_additional_params","useParProc",!1)},this.settings_info_params={textSize:t.getValue(e,"settings_info_params","textSize",10),infoTextCol:t.getValue(e,"settings_info_params","infoTextCol","gray50"),numDigitsInfo:t.getValue(e,"settings_info_params","numDigitsInfo","0"),whichInfo:t.getValue(e,"settings_info_params","whichInfo","none")},this.settings_axes_params={showScientificY:t.getValue(e,"settings_axes_params","showScientificY",!1),textSize:t.getValue(e,"settings_axes_params","textSize",12),labelsTextCol:t.getValue(e,"settings_axes_params","labelsTextCol","black"),userFormatX:t.getValue(e,"settings_axes_params","userFormatX","auto")}},e.prototype.enumerateObjectInstances=function(e){var i=e.objectName,n=[];switch(i){case"settings_forecastPlot_params":n.push({objectName:i,properties:{forecastLength:Math.round(t.inMinMax(this.settings_forecastPlot_params.forecastLength,1,1e6)),freq1:Math.round(t.inMinMax(this.settings_forecastPlot_params.freq1,1,1e6)),freq2:Math.round(t.inMinMax(this.settings_forecastPlot_params.freq2,1,1e6))},selector:null});break;case"settings_conf_params":n.push({objectName:i,properties:{confInterval1:this.settings_conf_params.confInterval1,confInterval2:this.settings_conf_params.confInterval2},selector:null});break;case"settings_graph_params":n.push({objectName:i,properties:{percentile:this.settings_graph_params.percentile,weight:this.settings_graph_params.weight,dataCol:this.settings_graph_params.dataCol,forecastCol:this.settings_graph_params.forecastCol,showInPlotFitted:this.settings_graph_params.showInPlotFitted}}),this.settings_graph_params.showInPlotFitted&&n.push({objectName:i,properties:{fittedCol:this.settings_graph_params.fittedCol}}),n.push({objectName:i,properties:{showFromTo:this.settings_graph_params.showFromTo}}),"all"!=this.settings_graph_params.showFromTo&&n.push({objectName:i,properties:{refPointShift:this.settings_graph_params.refPointShift},selector:null});break;case"settings_additional_params":n.push({objectName:i,properties:{valuesNonNegative:this.settings_additional_params.valuesNonNegative,algModeFast:this.settings_additional_params.algModeFast,useParProc:this.settings_additional_params.useParProc},selector:null});break;case"settings_info_params":n.push({objectName:i,properties:{whichInfo:this.settings_info_params.whichInfo,textSize:this.settings_info_params.textSize,infoTextCol:this.settings_info_params.infoTextCol,numDigitsInfo:this.settings_info_params.numDigitsInfo},selector:null});break;case"settings_axes_params":n.push({objectName:i,properties:{labelsTextCol:this.settings_axes_params.labelsTextCol,textSize:this.settings_axes_params.textSize,userFormatX:this.settings_axes_params.userFormatX,showScientificY:this.settings_axes_params.showScientificY},selector:null})}return n},e}();t.Visual=n}(t.rHTMLnew95480AC55B814FBCB378FA548F2C97AD||(t.rHTMLnew95480AC55B814FBCB378FA548F2C97AD={}))}(t.visual||(t.visual={}))}(e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(t){!function(t){t.rHTMLnew95480AC55B814FBCB378FA548F2C97AD={name:"rHTMLnew95480AC55B814FBCB378FA548F2C97AD",displayName:"RHTMLnew",class:"Visual",version:"1.0.0",apiVersion:"1.7.0",create:function(t){return new e.extensibility.visual.rHTMLnew95480AC55B814FBCB378FA548F2C97AD.Visual(t)},custom:!0}}(t.plugins||(t.plugins={}))}(e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));